if (self.CavalryLogger) { CavalryLogger.start_js(["mqrBt"]); }

__d("IntegrityContextTriggerGlimpseAnimator",["cx","CSS","OnVisible","Run","SubscriptionsHandler","ViewportBounds","getElementRect","getViewportDimensions","requestAnimationFrame"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="_3i0x",i="_3i0y",j=500,k={GLIMPSE_ANIM_ENABLED:"glimpse_anim_enabled",GLIMPSE_HAS_EVER_EXPANDED:"glimpse_has_ever_expanded",GLIMPSE_EXPAND_DELAY_MS:"glimpse_expand_delay_ms",GLIMPSE_CONTRACT_DELAY_MS:"glimpse_contract_delay_ms"},l=function(){__p&&__p();function a(a,c,d){__p&&__p();this.$1=a;this.$2=c;this.$3=d;this.$7=!1;a=this.destroy.bind(this);this.$4=new(b("SubscriptionsHandler"))();this.$4.addSubscriptions(b("Run").onLeave(a),b("Run").onUnload(a));this.$5=new(b("SubscriptionsHandler"))();this.$8();this.$6=new(b("SubscriptionsHandler"))()}var c=a.prototype;c.getExtraDataForTriggerLogger=function(){var a={};a[k.GLIMPSE_ANIM_ENABLED]="1";var b=this.$7?"1":"0";a[k.GLIMPSE_HAS_EVER_EXPANDED]=b;a[k.GLIMPSE_EXPAND_DELAY_MS]=this.$2.toString();b=this.$3;b!==null&&b!==void 0&&(a[k.GLIMPSE_CONTRACT_DELAY_MS]=b.toString());return a};c.destroy=function(){this.$4.release(),this.$5.release(),this.$6.release()};c.$8=function(){__p&&__p();var a=this;this.$5.release();if(this.$7)return;this.$5.engage();var c=new(b("SubscriptionsHandler"))();c.addSubscriptions(new(b("OnVisible"))(this.$1,function(){c.release(),a.$9()},!0,0));this.$5.addSubscriptions({remove:function(){c.release()}})};c.$9=function(){this.$10()};c.$10=function(){var a=this,c=new(b("SubscriptionsHandler"))(),d=setTimeout(function(){c.release(),a.$11(),a.$12()},this.$2);c.addSubscriptions({remove:function(){clearTimeout(d)}});c.addSubscriptions(new(b("OnVisible"))(this.$1,function(){c.release(),a.$8()},!0,0,!0));this.$5.addSubscriptions({remove:function(){c.release()}})};c.$13=function(){var a=b("ViewportBounds").getTop(),c=b("getViewportDimensions")().height,d=b("getElementRect")(this.$1);return d.bottom-d.top>0&&d.bottom>=a&&d.top<=c};c.$12=function(){var a=this;if(this.$3==null)return;var c=new(b("SubscriptionsHandler"))(),d=setTimeout(function(){c.release(),a.$13()?a.$14():a.$15()},this.$3);c.addSubscriptions({remove:function(){clearTimeout(d)}});this.$5.addSubscriptions({remove:function(){c.release()}})};c.$11=function(){this.$16(!0,!0)};c.$14=function(){this.$16(!1,!0)};c.$15=function(){this.$16(!1,!1)};c.$16=function(a,c){__p&&__p();var d=this;this.$7=this.$7||a;this.$6.release();this.$6.engage();b("CSS").conditionClass(this.$1,h,c);var e=b("requestAnimationFrame")(function(){b("CSS").conditionClass(d.$1,i,a);if(!c)return;var e=setTimeout(function(){d.$6.release(),b("CSS").removeClass(d.$1,h)},j);d.$6.addSubscriptions({remove:function(){clearTimeout(e)}})});this.$6.addSubscriptions({remove:function(){cancelAnimationFrame(e)}})};return a}();function a(a){var b=a.triggerRootElem;a=a.glimpseConfig;if(!b||!a)return null;var c=a.expandDelayMs;a=a.contractDelayMs;return c==null?null:new l(b,c,a)}e.exports={initAnim:a}}),null);
__d("IntegrityContextTriggerClientTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:IntegrityContextTriggerClientLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:IntegrityContextTriggerClientLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:IntegrityContextTriggerClientLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setEntryPoint=function(a){this.$1.entry_point=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setFeedTracking=function(a){this.$1.feed_tracking=a;return this};c.setIntegrityContextType=function(a){this.$1.integrity_context_type=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setTriggerLoggerID=function(a){this.$1.trigger_logger_id=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={entry_point:!0,event:!0,feed_tracking:!0,integrity_context_type:!0,time:!0,trigger_logger_id:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("IntegrityContextTriggerLoggerManager",["Event","IntegrityContextTriggerClientTypedLogger","OnVisible","Run","SubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g={},h=Object.freeze({TRIGGER_VPV:"trigger_vpv",TRIGGER_HOVER:"trigger_hover",TRIGGER_CLICK:"trigger_click"}),i=function(){__p&&__p();function a(a,c,d){__p&&__p();var e=a.triggerLinkElem,f=a.loggerID,g=a.serializedFTMsg,h=a.integrityContextType;a=a.entryPoint;this.$1=e;this.$2=f;this.$3=g;this.$4=h;this.$6=null;this.$5=a;this.$7=c;e=this.destroy.bind(this);f=new(b("SubscriptionsHandler"))();f.addSubscriptions(b("Run").onLeave(e),b("Run").onUnload(e));d||this.$9(f);this.$8=f}var c=a.prototype;c.$10=function(){var a=this,c=new(b("SubscriptionsHandler"))();c.addSubscriptions(new(b("OnVisible"))(this.$1,function(){c.release(),a.onFirstVisible()},!0,0));return c};c.$11=function(){var a=this,c=new(b("SubscriptionsHandler"))();c.addSubscriptions(b("Event").listen(this.$1,"mouseenter",function(){c.release(),a.onFirstMouseEnter()}));return c};c.$9=function(a){var c=this,d=this.$10(),e=this.$11();a.addSubscriptions(b("Event").listen(this.$1,"click",function(){c.onClick()}),{remove:function(){d.release(),e.release()}})};c.destroy=function(){this.$8.release(),delete g[this.$2]};c.onClick=function(){this.$6=new Date().valueOf(),this.$12(h.TRIGGER_CLICK)};c.onFirstMouseEnter=function(){this.$12(h.TRIGGER_HOVER)};c.onFirstVisible=function(){this.$12(h.TRIGGER_VPV)};c.getLastTriggerTimeMS=function(){return this.$6};c.$12=function(a){a=new(b("IntegrityContextTriggerClientTypedLogger"))().setEvent(a).setTriggerLoggerID(this.$2).setIntegrityContextType(this.$4).setEntryPoint(this.$5);this.$3&&a.setFeedTracking(this.$3);var c=this.$7&&this.$7();c&&a.updateExtraData(c);a.log()};return a}();function j(a){return g[a]||null}function k(a){a=j(a);a&&a.destroy()}function l(a,b,c){var d=a.loggerID;k(d);a=new i(a,b,c);g[d]=a;return a}function a(a,b){b===void 0&&(b=null);return l(a,b,!1)}function c(a){return l(a,null,!0)}function d(a){a=j(a);return a&&a.getLastTriggerTimeMS()||null}e.exports={initLogger:a,initLoggerWithCustomEventListeners:c,clearLogger:k,getLastTriggerTimeMS:d}}),null);